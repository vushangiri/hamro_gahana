{% extends "base.html" %}
{% block content %}

<div class="card rounded-3 border-0 shadow p-4">
  <h6 class="section-header mb-3 mt-2">{{ store.store_name | capitalize }}</h6>
  <div class="mb-3">
    {% if store.logo_filename %}
      <img src="{{ url_for('static', filename='uploads/' ~ store.logo_filename) }}" width="120" class="rounded shadow-sm mb-2">
    {% endif %}
    <p class="mb-1"><strong>Address:</strong> {{ store.store_address }}</p>
    <p class="mb-1"><strong>Phone:</strong> {{ store.phone2 or store.owner.phone }}</p>
    <a href="https://maps.google.com/?q={{store.latitude}},{{store.longitude}}" target="_blank" class="btn btn-sm btn-light-2 text-primary">View on Maps</a>
  </div>

  <!-- Search -->
  <form method="get" class="mb-3 d-flex gap-2">
    <input
      type="text"
      name="q"
      value="{{ search }}"
      class="form-control"
      placeholder="Search products..."
    >
    <button type="submit" class="btn btn-app fw-bold">Search</button>
  </form>

  <!-- Products -->
  {% if products %}
    <div class="row">
      {% for product in products %}
      <div class="col-6 mb-3">
        <div class="card h-100">
          {% if product.display_picture %}
          <img src="{{ url_for('static', filename='uploads/products/' ~ product.display_picture) }}" class="card-img-top" style="object-fit: cover; height: 150px;">
          {% endif %}
          <div class="card-body p-2">
            <h6 class="card-title mb-1">{{ product.name }}</h6>
            <a href="{{ url_for('user.product_detail', product_id=product.id, next=request.full_path) }}" class="btn btn-sm btn-app w-100 mt-1">View Details</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-muted">No products found.</p>
  {% endif %}
</div>

{% endblock %}
