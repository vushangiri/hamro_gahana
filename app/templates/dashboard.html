{% extends "base.html" %}
{% block content %}

<h6 class="section-header">Your Store</h6>

<div class="list-item">
  {% for store in stores %}
  <div class="d-flex align-items-center gap-3 mb-3 p-2 border rounded-3 shadow-sm">
    {% if store.logo_filename %}
      <img src="{{ url_for('static', filename='uploads/' ~ store.logo_filename) }}" alt="Store Logo" class="rounded-3" style="width: 60px; height: 60px; object-fit: cover;">
    {% else %}
      <div class="d-flex justify-content-center align-items-center bg-light rounded-3" style="width: 60px; height: 60px;">
        <i class="bi bi-shop text-muted"></i>
      </div>
    {% endif %}

    <div>
      <strong>{{ store.store_name | capitalize }}</strong><br>
      <small class="text-muted">{{ store.store_address }}</small><br>
      <a href="https://maps.google.com/?q={{store.latitude}},{{store.longitude}}" target="_blank" class="btn btn-sm btn-light-2 mt-1">
        <i class="bi bi-geo-alt"></i> View on Map
      </a>
    </div>
  </div>
  {% endfor %}
</div>


<h6 class="section-header">Your Products</h6>

<div class="list-item p-2">
  <table class="table mb-0">
    <thead>
      <tr>
        <th>Name</th>
        <th>Status</th>
        <th class="text-end">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for product in products %}
      <tr class="align-middle">
        <td><img src="{{ url_for('static', filename='uploads/products/' ~ product.display_picture) }}" alt="Product Image" class="img-fluid rounded-3 me-1" style="width: 40px; height: 40px;"> {{ product.name | capitalize }} </td>
        <td>
          <span class="status-badge {% if product.status == 'published' %}status-badge.completed{% else %}status-badge.pending{% endif %}">
            {{ product.status }}
          </span>
        </td>
        <td class="text-end">
          <a href="{{ url_for('user.edit_product', id=product.id) }}" class="btn btn-sm btn-light-2 me-1">
            <i class="bi bi-pencil"></i>
          </a>
          <form method="post" action="{{ url_for('user.delete_product', id=product.id) }}" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this product?');">
            <button type="submit" class="btn btn-sm btn-light-2">
              <i class="bi bi-trash"></i>
            </button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="mt-3">
  <a href="{{ url_for('user.add_product') }}" class="btn btn-app fw-bold">
    <i class="bi bi-plus-circle me-1"></i> Add New Product
  </a>
</div>

{% endblock %}
